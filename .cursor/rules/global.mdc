---
alwaysApply: true
---

# Project 365 – Global Rules

## 0. Vision

- This is an **AI-assisted goal tracker, planner, and strategist** for achieving any goal within **≤365 days**.
- The app should feel like a mix of **Notion + Cal.com/CalAI + useMotion**:
  - Minimal, clean, block-based layouts
  - Soft, modern typography
  - Strong focus on clarity: “What do I need to do today to stay on track?”
- The core promise: **if the user follows the plan to the letter, it should be unreasonable that they fail.**

## 1. Tech & Architecture

- **Language:** TypeScript everywhere.
- **Framework:** 
  - **React** (function components + hooks).
  - Bundler: **Vite** (React + TS template).
- **Platform (for now):**
  - **Web-only**: target desktop browser experience as the main UX.
  - Future desktop wrappers or mobile clients can reuse the domain and state layers.

- **Styling:**
  - Use **Tailwind CSS** as the primary styling layer.
  - Utility classes on React components.
  - Centralized design tokens (colors, spacing, typography) extended via Tailwind theme.

- **Data layer:**
  - Local-first (no backend in v1).
  - Use IndexedDB / localStorage behind a small repository layer.
  - All persistence behind repositories (no direct `localStorage`/`indexedDB` calls from components).

- **AI integration:**
  - OpenAI API.
  - User provides **their own API key** in a settings screen.
  - AI calls are wrapped in a dedicated module (`/src/ai`) with:
    - Typed request/response interfaces.
    - Zod validation on responses.
    - Clear separation between prompt building and app logic.

- **State management:**
  - Use a lightweight store such as **Zustand** for global app state (projects, tasks, settings).
  - Keep domain logic separate from React components (pure functions in `/src/domain`).

- **Routing:**
  - Use **React Router** (or similar) with a clear structure:
    - `Home / Dashboard`
    - `Project detail`
    - `Missed tasks`
    - `Settings`

When in doubt: keep it **client-only, web-only, and simple** for v1. Backend and native clients can be added later.

## 2. Domain Concepts (Canonical Names)

Use these names consistently across code, UI, and prompts:

- **Project**: A single goal initiative with:
  - `id`
  - `title`
  - `description`
  - `startDate`
  - `targetDate` (≤ 365 days from start; may be shorter)
  - `status` (planned, active, completed, cancelled)
  - `timeframe` breakdown: weekly, monthly, quarterly, final.
- **Milestone**:
  - Intermediate “checkpoints” (e.g. “Build MVP”, “Hit X revenue”, “Bench 225x5”).
  - Each milestone has its own `targetDate`.
- **Task** (planned task, AI-generated or manual):
  - A concrete action item with:
    - `id`
    - `projectId`
    - `date` (day planned for)
    - `title`
    - `description`
    - `effortEstimate` (e.g. S/M/L)
    - `status` (pending, done, missed)
- **Missed Task**:
  - A task with `status = "missed"`.
  - Belongs in a **weekly “Missed Tasks” view**.
  - Missed tasks persist in that weekly bucket until the week ends, then are wiped (per spec).
- **Progress Metrics**:
  - Quantitative/qualitative fields tracked over time per project.
- **Schedule metrics**:
  - `daysRemaining`: `targetDate - today`
  - `daysBehind`: divergence vs ideal timeline.

These core domain objects should live in `src/domain`.

## 3. UX / Behavior Requirements (High-Level)

- **Web-only layout:**
  - Design primarily for desktop browser width (e.g. 1280–1440px).
  - Responsive, but optimized for horizontal space.

- **Project creation flow:**
  - User sets:
    - Project name, description.
    - Start date (default: today).
    - Target date (max +365 days).
  - Optional:
    - Current baseline.
    - Time constraints (hours per day/week).
  - On submit, AI generates:
    - Full plan of milestones and tasks across the timeframe.
    - Realistically executable daily/weekly structure.

- **AI plan generation:**
  - Following it strictly should make failure “unreasonable”.
  - Includes:
    - Clear milestones.
    - Daily/weekly tasks.
    - Checkpoints to reassess and adjust.

- **Open configuration:**
  - Project page is heavily editable (Notion-style).
  - AI can modify **anything** when asked:
    - Regenerate from scratch.
    - Compress timeline.
    - Adjust difficulty if user is ahead.

- **Tasks & missed tasks:**
  - Daily recommended tasks are generated on project creation (can be updated).
  - If a task isn’t completed by end of its day:
    - Mark `status = "missed"` and show in this week’s **Missed Tasks** view.
  - At the start of a new week:
    - Clear the previous week’s missed tasks list.

- **Progress adaptation:**
  - If **behind schedule**:
    - Surface `daysBehind` and push catch-up recommendations.
  - If **ahead of schedule**:
    - Offer:
      - Earlier completion (shorter timeline).
      - Higher difficulty.

- **Notifications/reminders (web):**
  - Configurable in settings:
    - Time-of-day reminders (via browser notifications).
    - “You are X days behind” nudges.
  - Must be **opt-in** and respect browser permissions.

## 4. Code Style & Quality

- Strict TypeScript:
  - `"strict": true`
  - Avoid `any`; prefer generics and proper types.
- React:
  - Function components + hooks.
  - No class components.
- Keep components small and composable.
- **Styles:**
  - Use Tailwind utility classes.
  - Centralize theme tokens in `tailwind.config.ts` and use semantic class names (`bg-surface`, `text-primary`, etc.).

Testing:

- Unit tests for:
  - Schedule math (`daysRemaining`, `daysBehind`).
  - AI JSON → domain type mapping.
- Avoid brittle snapshot tests for now; focus on logic.

## 5. AI Usage – Global Guidelines

- Always **validate model output** with Zod schemas.
- Fail safely:
  - If AI output is malformed, show a user-friendly error and allow retry.
- Prompts:
  - Deterministic and structured.
  - Work with defined domain entities, not arbitrary prose blobs.
- Model selection:
  - Configurable in settings; default to a strong model for full-plan generation.
- Consider caching AI responses that are expensive and re-used.

## 6. Open Source & Maintainability

- Repo should include:
  - `README.md`
  - `CONTRIBUTING.md`
  - `CODE_OF_CONDUCT.md`
  - `LICENSE` (MIT).
- Modules:
  - `src/domain`
  - `src/ai`
  - `src/state`
  - `src/ui`
  - `src/screens`
  - `src/services`
- No magic numbers:
  - Use constants for important rules (365 days max, weekly wipe, thresholds for behind/ahead).

## 7. Cursor-Specific Instructions

- When generating/editing code:
  - Respect `src/domain` types and `src/state` stores.
  - Prefer new small modules over bloating old ones.
- When editing prompts:
  - Keep prompt templates in `src/ai/prompts`.
  - Avoid embedding long prompt strings directly in React components.
